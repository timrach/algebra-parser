(function(t){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=t()}else if(typeof define==="function"&&define.amd){define([],t)}else{var e;if(typeof window!=="undefined"){e=window}else if(typeof global!=="undefined"){e=global}else if(typeof self!=="undefined"){e=self}else{e=this}e.algebraParser=t()}})(function(){var t,e,r;return function i(t,e,r){function n(o,a){if(!e[o]){if(!t[o]){var u=typeof require=="function"&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=e[o]={exports:{}};t[o][0].call(h.exports,function(e){var r=t[o][1][e];return n(r?r:e)},h,h.exports,i,t,e,r)}return e[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<r.length;o++)n(r[o]);return n}({1:[function(t,e,r){var i=t("./src/fractions");var n=t("./src/expressions").Expression;var s=t("./src/equations");e.exports={Fraction:i,Expression:n,Equation:s}},{"./src/equations":2,"./src/expressions":3,"./src/fractions":4}],2:[function(t,e,r){var i=t("./expressions").Expression;var n=t("./expressions").Variable;var s=t("./expressions").Term;var o=t("./fractions");var a=t("./helper").isInt;var u=function(t,e){if(t instanceof i){this.lhs=t;if(e instanceof i){this.rhs=e}else if(e instanceof o||a(e)){this.rhs=(new i).add(e)}else{throw"InvalidArgument"}}else{throw"InvalidArgument"}};u.prototype.solveFor=function(t){if(!this.lhs._hasVariable(t)&&!this.rhs._hasVariable(t)){throw"InvalidArgument"}if(this._isLinear()||this._variableCanBeIsolated(t)){var e=new s(new n(t));var r=new i;var u=new i;for(var l=0;l<this.rhs.terms.length;l++){var h=this.rhs.terms[l];if(h.canBeCombinedWith(e)){r=r.subtract(h)}else{u=u.add(h)}}for(var l=0;l<this.lhs.terms.length;l++){var h=this.lhs.terms[l];if(h.canBeCombinedWith(e)){r=r.add(h)}else{u=u.subtract(h)}}u=u.subtract(this.lhs.constant);u=u.add(this.rhs.constant);if(r.terms.length===0){if(r.constant.equalTo(u.constant)){return"all reals"}else{throw"NoSolution"}}u=u.divide(r.terms[0].coefficient);if(u.terms.length===0){return u.constant.reduce()}u._sort();return u}else if(this._isQuadratic(t)){var r=this.lhs.copy();for(var l=0;l<this.rhs.terms.length;l++){r=r.subtract(this.rhs.terms[l])}r=r.subtract(this.rhs.constant);var f=r._quadraticCoefficients();var c=f.a;var p=f.b;var v=f.c;var m=p.pow(2).subtract(c.multiply(v).multiply(4));if(m.valueOf()>=0){if(m.valueOf()===0){return[p.multiply(-1).divide(c.multiply(2)).reduce()]}else{var d;if(m._squareRootIsRational()){d=m.pow(.5);var y=p.multiply(-1).subtract(d).divide(c.multiply(2));var b=p.multiply(-1).add(d).divide(c.multiply(2));return[y.reduce(),b.reduce()]}else{d=Math.sqrt(m.valueOf());c=c.valueOf();p=p.valueOf();var y=(-p-d)/2*c;var b=(-p+d)/2*c;return[y,b]}}}else{return[]}}else if(this._isCubic(t)){var r=this.lhs.copy();for(var l=0;l<this.rhs.terms.length;l++){r=r.subtract(this.rhs.terms[l])}r=r.subtract(this.rhs.constant);var f=r._cubicCoefficients();var c=f.a;var p=f.b;var v=f.c;var g=f.d;var _=c.multiply(p).multiply(v).multiply(g).multiply(18);_=_.subtract(p.pow(3).multiply(g).multiply(4));_=_.add(p.pow(2).multiply(v.pow(2)));_=_.subtract(c.multiply(v.pow(3)).multiply(4));_=_.subtract(c.pow(2).multiply(g.pow(2)).multiply(27));var w=p.pow(2).subtract(c.multiply(v).multiply(3));if(_.valueOf()===0){if(w.valueOf()===0){var y=p.multiply(-1).divide(c.multiply(3));return[y.reduce()]}else{var y=c.multiply(p).multiply(v).multiply(4);y=y.subtract(c.pow(2).multiply(g).multiply(9));y=y.subtract(p.pow(3));y=y.divide(c.multiply(w));var b=c.multiply(g).multiply(9).subtract(p.multiply(v)).divide(w.multiply(2));return[y.reduce(),b.reduce()]}}else{var T=new i("t").subtract(p.divide(c.multiply(3)));var x={};x[t]=T;var E=r.eval(x);var I=E._cubicCoefficients();var c=I.a.valueOf();var p=I.b.valueOf();var v=I.c.valueOf();var g=I.d.valueOf();if(_.valueOf()<0){var k=-p/3*c;var M=Math.pow(k,3)+(p*v-3*c*g)/(6*c^2);var O=v/3*c;var A=Math.sqrt(Math.pow(M,2)+Math.pow(O-Math.pow(k,2),3));var S=Math.cbrt(M+A)+Math.cbrt(M-A)+k;S=a(S)?new o(S,1):S;var x={};x[t]=Math.round(S);S=r.eval(x).toString()==="0"?new o(Math.round(S),1):S;return[S]}else{var M=Math.sqrt(-3*c*v/(9*Math.pow(c,2)));var P=2*c*Math.pow(M,3);var R=1/3*Math.acos(-g/P);var D=2*M*Math.cos(R);var L=2*M*Math.cos(2*Math.PI/3-R);var V=2*M*Math.cos(2*Math.PI/3+R);var C=D+T.constant.valueOf();var U=L+T.constant.valueOf();var N=V+T.constant.valueOf();C=a(C)?new o(C,1):C;U=a(U)?new o(U,1):U;N=a(N)?new o(N,1):N;var q={};var W={};var B={};q[t]=Math.round(C);W[t]=Math.round(U);B[t]=Math.round(N);C=r.eval(q).toString()==="0"?new o(Math.round(C),1):C;U=r.eval(W).toString()==="0"?new o(Math.round(U),1):U;N=r.eval(B).toString()==="0"?new o(Math.round(N),1):N;return[N,U,C]}}}};u.prototype.eval=function(t){return new u(this.lhs.eval(t),this.rhs.eval(t))};u.prototype.toString=function(){return this.lhs.toString()+" = "+this.rhs.toString()};u.prototype.toTex=function(){return this.lhs.toTex()+" = "+this.rhs.toTex()};u.prototype._maxDegree=function(){var t=this.lhs._maxDegree();var e=this.rhs._maxDegree();return Math.max(t,e)};u.prototype._maxDegreeOfVariable=function(t){return Math.max(this.lhs._maxDegreeOfVariable(t),this.rhs._maxDegreeOfVariable(t))};u.prototype._variableCanBeIsolated=function(t){return this._maxDegreeOfVariable(t)===1&&this._noCrossProductsWithVariable(t)};u.prototype._noCrossProductsWithVariable=function(t){return this.lhs._noCrossProductsWithVariable(t)&&this.rhs._noCrossProductsWithVariable(t)};u.prototype._noCrossProducts=function(){return this.lhs._noCrossProducts()&&this.rhs._noCrossProducts()};u.prototype._onlyHasVariable=function(t){return this.lhs._onlyHasVariable(t)&&this.rhs._onlyHasVariable(t)};u.prototype._isLinear=function(){return this._maxDegree()===1&&this._noCrossProducts()};u.prototype._isQuadratic=function(t){return this._maxDegree()===2&&this._onlyHasVariable(t)};u.prototype._isCubic=function(t){return this._maxDegree()===3&&this._onlyHasVariable(t)};e.exports=u},{"./expressions":3,"./fractions":4,"./helper":5}],3:[function(t,e,r){var i=t("./fractions");var n=t("./helper").isInt;var s=function(t){this.constant=new i(0,1);if(typeof t==="string"){var e=new o(t);var r=new Term(e);this.terms=[r]}else if(n(t)){this.constant=new i(t,1);this.terms=[]}else if(t instanceof i){this.constant=t;this.terms=[]}else if(t instanceof Term){this.terms=[t]}else if(typeof t==="undefined"){this.terms=[]}};s.prototype.copy=function(){var t=new s;t.constant=this.constant.copy();t.terms=[];this.terms.forEach(function(e){t.terms.push(e.copy())});return t};s.prototype.add=function(t){var e=this.copy();if(typeof t==="string"){var r=new s(t);return e.add(r)}else if(t instanceof Term){var r=new s;r.terms=[t.copy()];return e.add(r)}else if(t instanceof s){e.constant=e.constant.add(t.constant);var o=t.copy().terms;for(var a=0;a<e.terms.length;a++){var u=e.terms[a];for(var l=0;l<o.length;l++){var h=o[l];if(u.canBeCombinedWith(h)){e.terms[a]=u.add(h);o.splice(l,1)}}}e.terms=e.terms.concat(o)}else if(n(t)||t instanceof i){e.constant=e.constant.add(t)}else{throw"InvalidArgument"}e._removeTermsWithCoefficientZero();e._sort();return e};s.prototype.subtract=function(t){var e=this.copy();var r;if(typeof t==="string"){r=new s(t).multiply(-1)}else if(t instanceof Term){r=new s;r.terms=[t.copy().multiply(-1)]}else if(t instanceof s){r=t.copy();r.constant=r.constant.multiply(-1);for(var o=0;o<r.terms.length;o++){r.terms[o]=r.terms[o].multiply(-1)}}else if(n(t)){r=-t}else if(t instanceof i){r=t.multiply(-1)}else{throw"InvalidArgument"}return e.add(r)};s.prototype.multiply=function(t){var e=this.copy();if(typeof t==="string"){var r=new s(t);return e.multiply(r)}else if(t instanceof Term){var r=new s;r.terms=[t.copy()];return e.multiply(r)}else if(t instanceof s){var o=t.copy();var a=[];for(var u=0;u<e.terms.length;u++){var l=e.terms[u];for(var h=0;h<o.terms.length;h++){var f=o.terms[h];a.push(l.multiply(f))}a.push(l.multiply(o.constant))}for(var u=0;u<o.terms.length;u++){var f=o.terms[u];a.push(f.multiply(e.constant))}e.constant=e.constant.multiply(o.constant);e.terms=a;e._combineLikeTerms();e._removeTermsWithCoefficientZero();e._sort()}else if(t instanceof i||n(t)){e.constant=e.constant.multiply(t);for(var u=0;u<e.terms.length;u++){e.terms[u].coefficient=e.terms[u].coefficient.multiply(t)}}else{throw"InvalidArgument"}return e};s.prototype.divide=function(t){if(t instanceof i||n(t)){if(t==0){throw"DivideByZero"}var e=this.copy();e.constant=e.constant.divide(t);for(var r=0;r<e.terms.length;r++){e.terms[r].coefficient=e.terms[r].coefficient.divide(t)}return e}else{throw"InvalidArgument"}};s.prototype.pow=function(t){if(n(t)){var e=this.copy();if(t===0){return(new s).add(1)}else{for(var r=1;r<t;r++){e=e.multiply(this)}e._sort();return e}}else{throw"InvalidArgument"}};s.prototype.eval=function(t){var e=new s;for(var r=0;r<this.terms.length;r++){var i=this.terms[r];e=e.add(i.eval(t))}return e.add(this.constant)};s.prototype.toString=function(){if(this.terms.length==0){return this.constant.toString()}var t=this.terms[0].coefficient.reduce();var e=(t.numer<0?"-":"")+this.terms[0].toString();for(var r=1;r<this.terms.length;r++){var i=this.terms[r].coefficient.reduce();e+=(i.numer<0?" - ":" + ")+this.terms[r].toString()}var n=this.constant.reduce();if(n.numer){e+=(n.numer<0?" - ":" + ")+n.abs().toString()}return e};s.prototype.toTex=function(){if(this.terms.length==0){return this.constant.toTex()}var t=this.terms[0].coefficient.reduce();var e=(t.numer<0?"-":"")+this.terms[0].toTex();for(var r=1;r<this.terms.length;r++){var i=this.terms[r].coefficient.reduce();e+=(i.numer<0?" - ":" + ")+this.terms[r].toTex()}var n=this.constant.reduce();if(n.numer){e+=(n.numer<0?" - ":" + ")+n.abs().toTex()}return e};s.prototype._removeTermsWithCoefficientZero=function(){var t=[];for(var e=0;e<this.terms.length;e++){var r=this.terms[e].coefficient.reduce();if(r.numer!=0){t.push(this.terms[e])}}this.terms=t;return this};s.prototype._combineLikeTerms=function(){for(var t=0;t<this.terms.length;t++){var e=this.terms[t];for(var r=t+1;r<this.terms.length;r++){var i=this.terms[r];if(e.canBeCombinedWith(i)){e=e.add(i);this.terms[t]=e;this.terms.splice(r,1)}}}return this};s.prototype._sort=function(){function t(t,e){var r=t.maxDegree();var i=e.maxDegree();if(r===i){var n=t.variables.length;var s=e.variables.length;return s-n}else{return i-r}}this.terms=this.terms.sort(t);return this};s.prototype._hasVariable=function(t){for(var e=0;e<this.terms.length;e++){if(this.terms[e].hasVariable(t)){return true}}return false};s.prototype._onlyHasVariable=function(t){for(var e=0;e<this.terms.length;e++){if(!this.terms[e].onlyHasVariable(t)){return false}}return true};s.prototype._noCrossProductsWithVariable=function(t){for(var e=0;e<this.terms.length;e++){var r=this.terms[e];if(r.hasVariable(t)&&!r.onlyHasVariable(t)){return false}}return true};s.prototype._noCrossProducts=function(){for(var t=0;t<this.terms.length;t++){var e=this.terms[t];if(e.variables.length>1){return false}}return true};s.prototype._maxDegree=function(){var t=1;for(var e=0;e<this.terms.length;e++){var r=this.terms[e].maxDegree();if(r>t){t=r}}return t};s.prototype._maxDegreeOfVariable=function(t){var e=1;for(var r=0;r<this.terms.length;r++){var i=this.terms[r].maxDegreeOfVariable(t);if(i>e){e=i}}return e};s.prototype._quadraticCoefficients=function(){var t;var e=new i(0,1);var r=this.constant.copy();for(var n=0;n<this.terms.length;n++){var s=this.terms[n];if(s.maxDegree()===2){t=s.coefficient.copy()}else if(s.maxDegree()===1){e=s.coefficient.copy()}}return{a:t,b:e,c:r}};s.prototype._cubicCoefficients=function(){var t;var e=new i(0,1);var r=new i(0,1);var n=this.constant.copy();for(var s=0;s<this.terms.length;s++){var o=this.terms[s];if(o.maxDegree()===3){t=o.coefficient.copy()}else if(o.maxDegree()===2){e=o.coefficient.copy()}else if(o.maxDegree()===1){r=o.coefficient.copy()}}return{a:t,b:e,c:r,d:n}};Term=function(t){if(t instanceof o){this.variables=[t.copy()]}else if(typeof t==="undefined"){this.variables=[]}else{throw"InvalidArgument"}this.coefficient=new i(1,1)};Term.prototype.copy=function(){var t=new Term;t.variables=[];for(var e=0;e<this.variables.length;e++){t.variables.push(this.variables[e].copy())}t.coefficient=this.coefficient.copy();return t};Term.prototype.add=function(t){if(t instanceof Term&&this.canBeCombinedWith(t)){var e=this.copy();e.coefficient=e.coefficient.add(t.coefficient);return e}else{throw"InvalidArgument"}};Term.prototype.subtract=function(t){if(t instanceof Term&&this.canBeCombinedWith(t)){var e=this.copy();e.coefficient=e.coefficient.subtract(t.coefficient);return e}else{throw"InvalidArgument"}};Term.prototype.multiply=function(t){var e=this.copy();if(t instanceof Term){var r=t.copy();var s=e.variables;var o=r.variables;for(var a=0;a<s.length;a++){for(var u=0;u<o.length;u++){if(s[a].variable===o[u].variable){s[a].degree+=o[u].degree;o[u].throwaway=true}}}for(var a=0;a<o.length;a++){if(!o[a].throwaway){s.push(o[a])}}e.coefficient=e.coefficient.multiply(r.coefficient)}else if(n(t)||t instanceof i){e.coefficient=e.coefficient.multiply(t)}else{throw"InvalidArgument"}return e.sort()};Term.prototype.divide=function(t){if(n(t)||t instanceof i){var e=this.copy();e.coefficient=e.coefficient.divide(t);return e}else{throw"InvalidArgument"}};Term.prototype.eval=function(t){var e=this.copy();var r=Object.keys(t);var o=new s(this.coefficient);for(var a=0;a<e.variables.length;a++){var u=e.variables[a];var l=new s(u.variable).pow(u.degree);for(var h=0;h<r.length;h++){if(u.variable==r[h]){var f=t[r[h]];if(f instanceof i||f instanceof s){l=f.pow(u.degree)}else if(n(f)){l=Math.pow(f,u.degree)}else{throw"InvalidArgument"}}}o=o.multiply(l)}return o};Term.prototype.hasVariable=function(t){for(var e=0;e<this.variables.length;e++){if(this.variables[e].variable===t){return true}}return false};Term.prototype.maxDegree=function(){var t=1;for(var e=0;e<this.variables.length;e++){if(this.variables[e].degree>t){t=this.variables[e].degree}}return t};Term.prototype.maxDegreeOfVariable=function(t){var e=1;for(var r=0;r<this.variables.length;r++){var i=this.variables[r];if(i.variable===t){if(i.degree>e){e=i.degree}}}return e};Term.prototype.canBeCombinedWith=function(t){if(t instanceof Term){var e=this.variables;var r=t.variables;if(e.length!=r.length){return false}matches=0;for(var i=0;i<e.length;i++){for(var n=0;n<r.length;n++){if(e[i].variable===r[n].variable&&e[i].degree===r[n].degree){matches+=1}}}if(matches!=e.length){return false}}return true};Term.prototype.onlyHasVariable=function(t){for(var e=0;e<this.variables.length;e++){if(this.variables[e].variable!=t){return false}}return true};Term.prototype.sort=function(){function t(t,e){return e.degree-t.degree}this.variables=this.variables.sort(t);return this};Term.prototype.toString=function(){var t;var e=this.coefficient.reduce().abs();if(e.valueOf()===1){t=""}else{t=e.toString()}for(var r=0;r<this.variables.length;r++){t+=this.variables[r].toString()}return t};Term.prototype.toTex=function(){var t;var e=this.coefficient.reduce().abs();if(e.valueOf()===1){t=""}else{t=e.toTex()}for(var r=0;r<this.variables.length;r++){t+=this.variables[r].toTex()}return t};var o=function(t){if(typeof t==="string"){this.variable=t;this.degree=1}else{throw"InvalidArgument"}};o.prototype.copy=function(){var t=new o(this.variable);t.degree=this.degree;return t};o.prototype.toString=function(){var t=this.degree;var e=this.variable;if(t===0){return""}else if(t===1){return e}else{return e+"^"+t}};o.prototype.toTex=function(){var t=this.degree;var e=this.variable;if(GREEK_LETTERS.indexOf(e)>-1){e="\\"+e}if(t===0){return""}else if(t===1){return e}else{return e+"^{"+t+"}"}};e.exports={Expression:s,Term:Term,Variable:o}},{"./fractions":4,"./helper":5}],4:[function(t,e,r){var i=t("./helper").isInt;var n=t("./helper").gcd;var s=t("./helper").lcm;var o=function(t,e){if(e==0){throw"DivideByZero"}else if(i(t)&&i(e)){this.numer=t;this.denom=e}else{throw"InvalidArgument"}};o.prototype.copy=function(){return new o(this.numer,this.denom)};o.prototype.reduce=function(){var t=this.copy();var e=n(t.numer,t.denom);t.numer=t.numer/e;t.denom=t.denom/e;if(Math.sign(t.denom)==-1&&Math.sign(t.numer)==1){t.numer*=-1;t.denom*=-1}return t};o.prototype.equalTo=function(t){if(t instanceof o){var e=this.reduce();var r=t.reduce();if(e.numer===r.numer&&e.denom===r.denom){return true}}return false};o.prototype.add=function(t){var e,r;if(t instanceof o){e=t.numer;r=t.denom}else if(i(t)){e=t;r=1}else{throw"InvalidArgument"}var n=this.copy();if(this.denom==r){n.numer+=e}else{var a=s(n.denom,r);var u=a/n.denom;var l=a/r;n.numer*=u;n.denom*=u;e*=l;n.numer+=e}return n.reduce()};o.prototype.subtract=function(t){var e=this.copy();if(t instanceof o){return e.add(new o(-t.numer,t.denom))}else if(i(t)){return e.add(new o(-t,1))}else{throw"InvalidArgument"}};o.prototype.multiply=function(t){var e,r;if(t instanceof o){e=t.numer;r=t.denom}else if(i(t)&&t){e=t;r=1}else if(t==0){e=0;r=1}else{throw"InvalidArgument"}var n=this.copy();n.numer*=e;n.denom*=r;return n.reduce()};o.prototype.divide=function(t){if(t==0){throw"DivideByZero"}var e=this.copy();if(t instanceof o){return e.multiply(new o(t.denom,t.numer))}else if(i(t)){return e.multiply(new o(1,t))}else{throw"InvalidArgument"}};o.prototype.pow=function(t){var e=this.copy();e.numer=Math.pow(e.numer,t);e.denom=Math.pow(e.denom,t);return e.reduce()};o.prototype.abs=function(){var t=this.copy();t.numer=Math.abs(t.numer);t.denom=Math.abs(t.denom);return t.reduce()};o.prototype.valueOf=function(){return this.numer/this.denom};o.prototype.toString=function(){var t=this.reduce();if(t.numer==0){return"0"}else if(t.denom==1){return t.numer.toString()}else if(t.denom==-1){return(-t.numer).toString()}else{return t.numer+"/"+t.denom}};o.prototype.toTex=function(){var t=this.reduce();if(t.numer==0){return"0"}else if(t.denom==1){return t.numer.toString()}else if(t.denom==-1){return(-t.numer).toString()}else{return"\\frac{"+t.numer+"}{"+t.denom+"}"}};o.prototype._squareRootIsRational=function(){if(this.valueOf()===0){return true}var t=Math.sqrt(this.numer);var e=Math.sqrt(this.denom);return i(t)&&i(e)};o.prototype._cubeRootIsRational=function(){if(this.valueOf()===0){return true}var t=Math.cbrt(this.numer);var e=Math.cbrt(this.denom);return i(t)&&i(e)};e.exports=o},{"./helper":5}],5:[function(t,e,r){function i(t,e){while(e){var r=t;t=e;e=r%e}return t}function n(t,e){return t*e/i(t,e)}function s(t){if(typeof t=="number"){if(t%1===0){return true}}return false}function o(t,e){e=typeof e==="undefined"?2:e;var r=Math.pow(10,e);return Math.round(parseFloat(t)*r)/r}Number.prototype.toTex=function(){return this.toString()};Array.prototype.toTex=function(){var t=[];for(var e=0;e<this.length;e++){t.push(this[e].toTex())}return t.join()};GREEK_LETTERS=["alpha","beta","gamma","Gamma","delta","Delta","epsilon","varepsilon","zeta","eta","theta","vartheta","Theta","iota","kappa","lambda","Lambda","mu","nu","xi","Xi","pi","Pi","rho","varrho","sigma","Sigma","tau","upsilon","Upsilon","phi","varphi","Phi","chi","psi","Psi","omega","Omega"];r.gcd=i;r.lcm=n;r.isInt=s;r.round=o;r.GREEK_LETTERS=GREEK_LETTERS},{}],6:[function(t,e,r){"use strict";var i=t("./lexer"),n=t("algebra.js"),s=n.Expression,o=n.Equation,a=n.Fraction;var u=function(){this.lexer=new i;this.current_token=null;this.operator_stack=[];this.output=[];this.prec={EQUALS:1,PLUS:2,MINUS:2,MULTIPLY:3,DIVIDE:3,POWER:4};this.asso={PLUS:"LEFT",MINUS:"LEFT",MULTIPLY:"LEFT",DIVIDE:"LEFT",POWER:"RIGHT",EQUALS:"RIGHT"}};u.prototype.parse=function(t){this.operator_stack=[];this.output=[];this.lexer.input(t);this.shunting_yard();return this.construct_expression()};u.prototype.stack_top=function(){return this.operator_stack[this.operator_stack.length-1]};u.prototype.stack_head_to_ouput=function(){this.output.push(this.operator_stack.pop())};u.prototype.shunting_yard=function(){this.current_token=this.lexer.token();while(this.current_token!==null){if(this.current_token.type==="NUMBER"||this.current_token.type==="IDENTIFIER"){this.output.push(this.current_token)}else if(this.current_token.type==="OPERATOR"){var t=this.current_token;while(this.operator_stack.length>0){var e=this.stack_top();if(this.asso[t.value]==="LEFT"&&this.prec[t.value]<=this.prec[e.value]||this.asso[t.value]==="RIGHT"&&this.prec[t.value]<this.prec[e.value]){this.stack_head_to_ouput()}else{break}}this.operator_stack.push(t)}else{if(this.current_token.value==="L_PAREN"){this.operator_stack.push(this.current_token)}else{while(this.stack_top()!==undefined){if(this.stack_top().value==="L_PAREN"){break}else{this.stack_head_to_ouput()}}var r=this.operator_stack.pop();if(r===undefined){throw new Error("Unbalanced Parenthesis")}}}this.current_token=this.lexer.token()}while(this.operator_stack.length>0){if(this.stack_top().type==="PAREN"){throw new Error("Unbalanced Parenthesis")}else{this.stack_head_to_ouput()}}};u.prototype.convert_for_application=function(t){var e=t;if(t.type!==undefined){if(parseInt(t.value)==t.value){e=new s(parseInt(t.value))}else{e=new s(t.value)}}return e};u.prototype.apply_operator=function(t,e,r){var i;e=this.convert_for_application(e);r=this.convert_for_application(r);switch(t.value){case"PLUS":i=e.add(r);break;case"MINUS":i=e.subtract(r);break;case"MULTIPLY":i=e.multiply(r);break;case"DIVIDE":i=e.divide(parseInt(r.toString()));break;case"POWER":i=e.pow(parseInt(r.toString()));break;case"EQUALS":i=new o(e,r);break}return i};u.prototype.construct_expression=function(){var t=this.output.pop();if(t.type==="OPERATOR"){var e=this.construct_expression();var r=this.construct_expression();return this.apply_operator(t,r,e)}else{return t}};e.exports=u},{"./lexer":7,"algebra.js":1}],7:[function(t,e,r){"use strict";var i=function(){this.pos=0;this.buf=null;this.buflen=0;this.optable={"+":"PLUS","-":"MINUS","*":"MULTIPLY","/":"DIVIDE","^":"POWER","(":"L_PAREN",")":"R_PAREN","=":"EQUALS"}};i.prototype.input=function(t){this.pos=0;this.buf=t;this.buflen=t.length};i.prototype.token=function(){this._skipnontokens();if(this.pos>=this.buflen){return null}var t=this.buf.charAt(this.pos);var e=this.optable[t];if(e!==undefined){if(e==="L_PAREN"||e==="R_PAREN"){return{type:"PAREN",value:e,pos:this.pos++}}else{return{type:"OPERATOR",value:e,pos:this.pos++}}}else{if(i._isalpha(t)){return this._process_identifier()}else if(i._isdigit(t)){return this._process_number()}else{throw new Error("Token error at character "+t+" at position "+this.pos)}}};i._isdigit=function(t){return t>="0"&&t<="9"};i._isalpha=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"};i._isalphanum=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"};i.prototype._process_number=function(){var t=this.pos+1;while(t<this.buflen&&i._isdigit(this.buf.charAt(t))){t++}var e={type:"NUMBER",value:this.buf.substring(this.pos,t),pos:this.pos};this.pos=t;return e};i.prototype._process_identifier=function(){var t=this.pos+1;while(t<this.buflen&&i._isalphanum(this.buf.charAt(t))){t++}var e={type:"IDENTIFIER",value:this.buf.substring(this.pos,t),pos:this.pos};this.pos=t;return e};i.prototype._skipnontokens=function(){while(this.pos<this.buflen){var t=this.buf.charAt(this.pos);if(t==" "||t=="	"||t=="\r"||t=="\n"){this.pos++}else{break}}};e.exports=i},{}]},{},[6])(6)});